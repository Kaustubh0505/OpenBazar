{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/kaustubhhiwanj/OpenBazar/frontend/app/components/LoginForm.jsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport axios from \"axios\";\n\nexport default function LoginForm() {\n  const router = useRouter();\n\n  const [mode, setMode] = useState(\"password\"); // password | otp\n  const [step, setStep] = useState(\"login\"); // login | otp\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n\n  const [formData, setFormData] = useState({\n    identifier: \"\",\n    password: \"\",\n    email: \"\",\n  });\n\n  const [otp, setOtp] = useState(\"\");\n\n  const handleChange = (e) => {\n    setFormData({ ...formData, [e.target.name]: e.target.value });\n  };\n\n  /* ================= PASSWORD LOGIN ================= */\n  const handlePasswordLogin = async (e) => {\n    e.preventDefault();\n    setError(\"\");\n\n    if (!formData.identifier || !formData.password) {\n      return setError(\"All fields are required\");\n    }\n\n    try {\n      setLoading(true);\n      const res = await axios.post(\n        \"http://localhost:5001/api/auth/login\",\n        {\n          identifier: formData.identifier,\n          password: formData.password,\n        }\n      );\n      localStorage.setItem(\"token\", res.data.token);\n      router.push(\"/homePage\");\n    } catch (err) {\n      setError(err.response?.data?.message || \"Login failed\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  /* ================= SEND OTP ================= */\n  const handleSendOtp = async (e) => {\n    e.preventDefault();\n    setError(\"\");\n\n    if (!formData.email) return setError(\"Email is required\");\n\n    try {\n      setLoading(true);\n      await axios.post(\n        \"http://localhost:5001/api/auth/login/send-otp\",\n        { email: formData.email }\n      );\n      setStep(\"otp\");\n    } catch (err) {\n      setError(err.response?.data?.message || \"Failed to send OTP\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  /* ================= VERIFY OTP ================= */\n  const handleVerifyOtp = async () => {\n    setError(\"\");\n    if (!otp) return setError(\"Enter OTP\");\n\n    try {\n      setLoading(true);\n      const res = await axios.post(\n        \"http://localhost:5001/api/auth/login/verify-otp\",\n        { email: formData.email, otp }\n      );\n      localStorage.setItem(\"token\", res.data.token);\n      router.push(\"/homePage\");\n    } catch (err) {\n      setError(err.response?.data?.message || \"Invalid OTP\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-slate-100 px-4\">\n      <form\n        onSubmit={mode === \"password\" ? handlePasswordLogin : handleSendOtp}\n        className=\"bg-white text-gray-600 w-full max-w-[350px] p-6 rounded-xl shadow-[0px_0px_10px_0px] shadow-black/10\"\n      >\n        <h2 className=\"text-2xl font-semibold mb-6 text-center text-gray-800\">\n          Login Now\n        </h2>\n\n        {error && (\n          <p className=\"text-red-500 text-sm mb-4 text-center\">{error}</p>\n        )}\n\n        {/* MODE TOGGLE */}\n        <div className=\"flex mb-5 rounded-full overflow-hidden border border-gray-300\">\n          <button\n            type=\"button\"\n            onClick={() => {\n              setMode(\"password\");\n              setStep(\"login\");\n            }}\n            className={`w-1/2 py-2 text-sm cursor-pointer transition ${\n              mode === \"password\"\n                ? \"bg-indigo-500 text-white\"\n                : \"bg-gray-100\"\n            }`}\n          >\n            Password\n          </button>\n          <button\n            type=\"button\"\n            onClick={() => {\n              setMode(\"otp\");\n              setStep(\"login\");\n            }}\n            className={`w-1/2 py-2 text-sm cursor-pointer transition ${\n              mode === \"otp\"\n                ? \"bg-indigo-500 text-white\"\n                : \"bg-gray-100\"\n            }`}\n          >\n            Email OTP\n          </button>\n        </div>\n\n        {/* PASSWORD LOGIN */}\n        {mode === \"password\" && (\n          <>\n            <input\n              type=\"text\"\n              name=\"identifier\"\n              placeholder=\"Email or Phone\"\n              value={formData.identifier}\n              onChange={handleChange}\n              className=\"w-full border my-3 border-gray-400/40 outline-none rounded-full py-2.5 px-4\"\n            />\n\n            <input\n              type=\"password\"\n              name=\"password\"\n              placeholder=\"Password\"\n              value={formData.password}\n              onChange={handleChange}\n              className=\"w-full border mt-1 border-gray-400/40 outline-none rounded-full py-2.5 px-4\"\n            />\n\n            <div className=\"text-right py-4\">\n              <button\n                type=\"button\"\n                className=\"text-blue-600 text-sm underline\"\n              >\n                Forgot Password?\n              </button>\n            </div>\n\n            <button\n              type=\"submit\"\n              disabled={loading}\n              className=\"w-full cursor-pointer mb-3 bg-indigo-500 hover:bg-indigo-600 active:scale-95 transition py-2.5 rounded-full text-white disabled:opacity-50\"\n            >\n              {loading ? \"Logging in...\" : \"Log in\"}\n            </button>\n          </>\n        )}\n\n        {/* OTP LOGIN */}\n        {mode === \"otp\" && step === \"login\" && (\n          <>\n            <input\n              type=\"email\"\n              name=\"email\"\n              placeholder=\"Enter your email\"\n              value={formData.email}\n              onChange={handleChange}\n              className=\"w-full border my-4 border-gray-400/40 outline-none rounded-full py-2.5 px-4\"\n            />\n\n            <button\n              type=\"submit\"\n              disabled={loading}\n              className=\"w-full cursor-pointer mb-3 bg-indigo-500 hover:bg-indigo-600 active:scale-95 transition py-2.5 rounded-full text-white disabled:opacity-50\"\n            >\n              {loading ? \"Sending OTP...\" : \"Send OTP\"}\n            </button>\n          </>\n        )}\n\n        {/* OTP VERIFY */}\n        {mode === \"otp\" && step === \"otp\" && (\n          <>\n            <input\n              type=\"text\"\n              placeholder=\"Enter OTP\"\n              value={otp}\n              onChange={(e) => setOtp(e.target.value)}\n              className=\"w-full border my-4 border-gray-400/40 outline-none rounded-full py-2.5 px-4\"\n            />\n\n            <button\n              type=\"button\"\n              onClick={handleVerifyOtp}\n              disabled={loading}\n              className=\"w-full mb-3 cursor-pointer bg-green-500 hover:bg-green-600 active:scale-95 transition py-2.5 rounded-full text-white disabled:opacity-50\"\n            >\n              {loading ? \"Verifying...\" : \"Verify OTP\"}\n            </button>\n          </>\n        )}\n\n        <p className=\"text-center mt-4 text-sm\">\n          Donâ€™t have an account?{\" \"}\n          <button\n            type=\"button\"\n            onClick={() => router.push(\"/auth/signup\")}\n            className=\"text-blue-500 cursor-pointer underline\"\n          >\n            Signup Now\n          </button>\n        </p>\n      </form>\n    </div>\n  );\n}\n"],"names":["useState","useRouter","axios","LoginForm","router","mode","setMode","step","setStep","loading","setLoading","error","setError","formData","setFormData","identifier","password","email","otp","setOtp","handleChange","e","target","name","value","handlePasswordLogin","preventDefault","res","post","localStorage","setItem","data","token","push","err","response","message","handleSendOtp","handleVerifyOtp"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 301, "column": 0}, "map": {"version":3,"sources":["file:///Users/kaustubhhiwanj/OpenBazar/frontend/app/auth/login/page.js"],"sourcesContent":["\"use client\"\nimport LoginForm from \"@/app/components/LoginForm\";\n\nexport default function LoginPage() {\n\n    return (\n        <LoginForm/>\n    );\n  }\n  "],"names":["c","_c","LoginForm","LoginPage","$","$i","Symbol","for","t0"],"mappings":";;;;;AAAY,SAAAA,CAAA,IAAAC,EAAA;AACZ,OAAOC,SAAS,MAAM,4BAA4B;AADlD,YAAY;;;;AAGG;IAAA,MAAAE,CAAA,OAAAH,gLAAA,EAAA;IAAA,IAAAG,CAAA,CAAA,EAAA,KAAA,oEAAA;QAAA,IAAA,IAAAC,EAAA,GAAA,GAAAA,EAAA,GAAA,GAAAA,EAAA,IAAA,EAAA;YAAAD,CAAA,CAAAC,EAAA,CAAA,GAAAC,MAAA,CAAAC,GAAA,CAAA;QAAA;QAAAH,CAAA,CAAA,EAAA,GAAA;IAAA;IAAA,IAAAI,EAAA;IAAA,IAAAJ,CAAA,CAAA,EAAA,KAAAE,MAAA,CAAAC,GAAA,CAAA,8BAAA;QAGPC,EAAA,iBAAA,6LAAC,6IAAS,GAAE;;;;;QAAAJ,CAAA,CAAA,EAAA,GAAAI,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAAJ,CAAA,CAAA,EAAA;IAAA;IAAA,OAAZI,EAAY;AAAA;KAHLL,UAAA","ignoreList":[]}}]
}