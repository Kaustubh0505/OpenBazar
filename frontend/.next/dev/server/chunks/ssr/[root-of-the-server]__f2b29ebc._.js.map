{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 112, "column": 0}, "map": {"version":3,"sources":["file:///Users/kaustubhhiwanj/OpenBazar/frontend/app/components/LoginForm.jsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport axios from \"axios\";\n\nexport default function LoginForm() {\n  const router = useRouter();\n\n  const [mode, setMode] = useState(\"password\"); // password | otp\n  const [step, setStep] = useState(\"login\"); // login | otp\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n\n  const [formData, setFormData] = useState({\n    identifier: \"\",\n    password: \"\",\n    email: \"\",\n  });\n\n  const [otp, setOtp] = useState(\"\");\n\n  const handleChange = (e) => {\n    setFormData({ ...formData, [e.target.name]: e.target.value });\n  };\n\n  /* ================= PASSWORD LOGIN ================= */\n  const handlePasswordLogin = async (e) => {\n    e.preventDefault();\n    setError(\"\");\n\n    if (!formData.identifier || !formData.password) {\n      return setError(\"All fields are required\");\n    }\n\n    try {\n      setLoading(true);\n      const res = await axios.post(\n        \"http://localhost:5001/api/auth/login\",\n        {\n          identifier: formData.identifier,\n          password: formData.password,\n        }\n      );\n      localStorage.setItem(\"token\", res.data.token);\n      router.push(\"/homePage\");\n    } catch (err) {\n      setError(err.response?.data?.message || \"Login failed\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  /* ================= SEND OTP ================= */\n  const handleSendOtp = async (e) => {\n    e.preventDefault();\n    setError(\"\");\n\n    if (!formData.email) return setError(\"Email is required\");\n\n    try {\n      setLoading(true);\n      await axios.post(\n        \"http://localhost:5001/api/auth/login/send-otp\",\n        { email: formData.email }\n      );\n      setStep(\"otp\");\n    } catch (err) {\n      setError(err.response?.data?.message || \"Failed to send OTP\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  /* ================= VERIFY OTP ================= */\n  const handleVerifyOtp = async () => {\n    setError(\"\");\n    if (!otp) return setError(\"Enter OTP\");\n\n    try {\n      setLoading(true);\n      const res = await axios.post(\n        \"http://localhost:5001/api/auth/login/verify-otp\",\n        { email: formData.email, otp }\n      );\n      localStorage.setItem(\"token\", res.data.token);\n      router.push(\"/homePage\");\n    } catch (err) {\n      setError(err.response?.data?.message || \"Invalid OTP\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-slate-100 px-4\">\n      <form\n        onSubmit={mode === \"password\" ? handlePasswordLogin : handleSendOtp}\n        className=\"bg-white text-gray-600 w-full max-w-[350px] p-6 rounded-xl shadow-[0px_0px_10px_0px] shadow-black/10\"\n      >\n        <h2 className=\"text-2xl font-semibold mb-6 text-center text-gray-800\">\n          Login Now\n        </h2>\n\n        {error && (\n          <p className=\"text-red-500 text-sm mb-4 text-center\">{error}</p>\n        )}\n\n        {/* MODE TOGGLE */}\n        <div className=\"flex mb-5 rounded-full overflow-hidden border border-gray-300\">\n          <button\n            type=\"button\"\n            onClick={() => {\n              setMode(\"password\");\n              setStep(\"login\");\n            }}\n            className={`w-1/2 py-2 text-sm cursor-pointer transition ${\n              mode === \"password\"\n                ? \"bg-indigo-500 text-white\"\n                : \"bg-gray-100\"\n            }`}\n          >\n            Password\n          </button>\n          <button\n            type=\"button\"\n            onClick={() => {\n              setMode(\"otp\");\n              setStep(\"login\");\n            }}\n            className={`w-1/2 py-2 text-sm cursor-pointer transition ${\n              mode === \"otp\"\n                ? \"bg-indigo-500 text-white\"\n                : \"bg-gray-100\"\n            }`}\n          >\n            Email OTP\n          </button>\n        </div>\n\n        {/* PASSWORD LOGIN */}\n        {mode === \"password\" && (\n          <>\n            <input\n              type=\"text\"\n              name=\"identifier\"\n              placeholder=\"Email or Phone\"\n              value={formData.identifier}\n              onChange={handleChange}\n              className=\"w-full border my-3 border-gray-400/40 outline-none rounded-full py-2.5 px-4\"\n            />\n\n            <input\n              type=\"password\"\n              name=\"password\"\n              placeholder=\"Password\"\n              value={formData.password}\n              onChange={handleChange}\n              className=\"w-full border mt-1 border-gray-400/40 outline-none rounded-full py-2.5 px-4\"\n            />\n\n            <div className=\"text-right py-4\">\n              <button\n                type=\"button\"\n                className=\"text-blue-600 text-sm underline\"\n              >\n                Forgot Password?\n              </button>\n            </div>\n\n            <button\n              type=\"submit\"\n              disabled={loading}\n              className=\"w-full cursor-pointer mb-3 bg-indigo-500 hover:bg-indigo-600 active:scale-95 transition py-2.5 rounded-full text-white disabled:opacity-50\"\n            >\n              {loading ? \"Logging in...\" : \"Log in\"}\n            </button>\n          </>\n        )}\n\n        {/* OTP LOGIN */}\n        {mode === \"otp\" && step === \"login\" && (\n          <>\n            <input\n              type=\"email\"\n              name=\"email\"\n              placeholder=\"Enter your email\"\n              value={formData.email}\n              onChange={handleChange}\n              className=\"w-full border my-4 border-gray-400/40 outline-none rounded-full py-2.5 px-4\"\n            />\n\n            <button\n              type=\"submit\"\n              disabled={loading}\n              className=\"w-full cursor-pointer mb-3 bg-indigo-500 hover:bg-indigo-600 active:scale-95 transition py-2.5 rounded-full text-white disabled:opacity-50\"\n            >\n              {loading ? \"Sending OTP...\" : \"Send OTP\"}\n            </button>\n          </>\n        )}\n\n        {/* OTP VERIFY */}\n        {mode === \"otp\" && step === \"otp\" && (\n          <>\n            <input\n              type=\"text\"\n              placeholder=\"Enter OTP\"\n              value={otp}\n              onChange={(e) => setOtp(e.target.value)}\n              className=\"w-full border my-4 border-gray-400/40 outline-none rounded-full py-2.5 px-4\"\n            />\n\n            <button\n              type=\"button\"\n              onClick={handleVerifyOtp}\n              disabled={loading}\n              className=\"w-full mb-3 cursor-pointer bg-green-500 hover:bg-green-600 active:scale-95 transition py-2.5 rounded-full text-white disabled:opacity-50\"\n            >\n              {loading ? \"Verifying...\" : \"Verify OTP\"}\n            </button>\n          </>\n        )}\n\n        <p className=\"text-center mt-4 text-sm\">\n          Donâ€™t have an account?{\" \"}\n          <button\n            type=\"button\"\n            onClick={() => router.push(\"/auth/signup\")}\n            className=\"text-blue-500 cursor-pointer underline\"\n          >\n            Signup Now\n          </button>\n        </p>\n      </form>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 396, "column": 0}, "map": {"version":3,"sources":["file:///Users/kaustubhhiwanj/OpenBazar/frontend/app/auth/login/page.js"],"sourcesContent":["\"use client\"\nimport LoginForm from \"@/app/components/LoginForm\";\n\nexport default function LoginPage() {\n\n    return (\n        <LoginForm/>\n    );\n  }\n  "],"names":[],"mappings":";;;;;AACA;AADA;;;AAGe,SAAS;IAEpB,qBACI,8OAAC,0IAAS;;;;;AAEhB"}}]
}